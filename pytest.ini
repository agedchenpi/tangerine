[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test output configuration
addopts =
    -v
    --strict-markers
    --tb=short
    --cov=common
    --cov=etl
    --cov-report=term-missing
    --cov-report=html
    --cov-fail-under=80

# Custom markers
markers =
    unit: Unit tests for individual functions/classes
    integration: Integration tests requiring external resources (database, etc.)
    e2e: End-to-end tests for complete ETL pipelines
    slow: Tests that take significant time to run

# Environment variables for testing
env =
    DB_URL=postgresql://test_user:test_pass@localhost:5432/test_db
    ETL_LOG_LEVEL=DEBUG
    ETL_LOG_DIR=/tmp/etl_logs
    ETL_ENABLE_DB_LOGGING=false
    ETL_ENABLE_FILE_LOGGING=true
